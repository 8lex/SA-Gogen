global:
  samplesDir:
  - $GOGEN_HOME/examples/nixOS
generators:
  - name: cpu
    fileName: $GOGEN_HOME/examples/nixOS/cpu.lua
    options:
      minCPU: 30.0
      maxCPU: 75.0
      numCPUs: 8
  - name: df
    fileName: $GOGEN_HOME/examples/nixOS/df.lua
    options:
      minDiskUsedPct: 50.0
      maxDiskUsedPct: 69.0
      totalGBperDisk: 931
      numDisks: 4
  - name: vmstat
    fileName: $GOGEN_HOME/examples/nixOS/vmstat.lua
    options:
      minMemUsedPct: 5.0
      maxMemUsedPct: 60.0
      totalMB: 16000
  - name: bandwidth
    fileName: $GOGEN_HOME/examples/nixOS/bandwidth.lua
    options:
      minKBPS: 1000
      maxKBPS: 1500
      numNICs: 2
  - name: iostat
    fileName: $GOGEN_HOME/examples/nixOS/iostat.lua
    options:
      highWrites: 0
      highReads: 0
      maxOps: 1000
      avgKB: 0.512
      maxTime: 100
samples:
  - name: cpu
    description: Generate CPU Metrics
    notes: >
      Generates CPU usage in the form of Splunk's UNIX TA
    generator: cpu
    interval: 60
    tokens:
    - name: host
      type: fieldChoice
      srcField: host
      sample: allhosts.csv
      disabled: true
    lines:
    - index: os
      sourcetype: cpu
      source: cpu
      host: $host$
      _raw: |-
        CPU	pctUser	pctNice	pctSystem	pctIowait	pctIdle
        all	$pctUserAll$	0	$pctSystemAll$	$pctIowaitAll$	$pctIdleAll$
    - index: os
      sourcetype: cpu
      source: cpu
      host: $host$
      _raw: $CPU$	$pctUser$	0	$pctSystem$	$pctIowait$	$pctIdle$
  - name: df
    description: Generate Disk Usage Metrics
    notes: >
      Generates Disk Usage in the form of a df command from the Splunk UNIX TA
    generator: df
    interval: 60
    tokens:
    - name: disks
      type: fieldChoice
      srcField: disk
      sample: disks.csv
      disabled: true
    - name: host
      type: fieldChoice
      srcField: host
      sample: allhosts.csv
      disabled: true
    lines:
    - index: os
      sourcetype: df
      source: df
      host: $host$
      _raw: Filesystem	Type	Size	Used	Avail	UsePct	MountedOn
    - index: os
      sourcetype: df
      source: df
      host: $host$
      _raw: $fs$	ext4	$totalGB$G	$usedGB$G	$availGB$G	$usedPct$%	$mnt$
  - name: vmstat
    description: Generate Memory Usage Metrics
    notes: >
      Generates memory Usage in the form of a vmstat command from the Splunk UNIX TA
    generator: vmstat
    interval: 60
    tokens:
    - name: host
      type: fieldChoice
      srcField: host
      sample: allhosts.csv
      disabled: true
    lines:
    - index: os
      sourcetype: df
      source: df
      host: $host$
      _raw: memTotalMB	memFreeMB	memUsedMB	memFreePct	memUsedPct	pgPageOut	swapUsedPct	pgSwapOut	cSwitches	interrupts	forks	processes	threads	loadAvg1mi	waitThreads	interrupts_PS	pgPageIn_PS	pgPageOut_PS
    - index: os
      sourcetype: df
      source: df
      host: $host$
      _raw: $memTotalMB$	$memFreeMB$	$memUsedMB$	$memFreePct$	$memUsedPct$	$pgPageOut$	$swapUsedPct$	$pgSwapOut$	$cSwitches$	$interrupts$	$forks$	$processes$	$threads$	$loadAvg1mi$	$waitThreads$	$interruptsPS$	$pgPageInPS$	$pgPageOutPS$
  - name: bandwidth
    description: Generate Bandwidth Usage Metrics
    notes: >
      Generates bandwidth usage from the Splunk UNIX TA
    generator: bandwidth
    interval: 60
    tokens:
    - name: host
      type: fieldChoice
      srcField: host
      sample: allhosts.csv
      disabled: true
    lines:
    - index: os
      sourcetype: bandwidth
      source: bandwidth
      host: $host$
      _raw: Name	rxPackets_PS	txPackets_PS	rxKB_PS	txKB_PS
    - index: os
      sourcetype: df
      source: df
      host: $host$
      _raw: $nic$	$rx_p$	$tx_p$	$rx_kb$	$tx_kb$
  - name: iostat
    description: Generate Iostat Usage Metrics
    notes: >
      Generates iostat usage from the Splunk UNIX TA
    generator: iostat
    interval: 60
    tokens:
    - name: host
      type: fieldChoice
      srcField: host
      sample: allhosts.csv
      disabled: true
    - name: disks
      type: choice
      choice:
      - sda
      - sdb
      - dm-0
      - dm-1
      disabled: true
    lines:
    - index: os
      sourcetype: iostat
      source: iostat
      host: $host$
      _raw: Device	rReq_PS	wReq_PS	rKB_PS	wKB_PS	avgWaitMillis	avgSvcMillis	bandwUtilPct
    - index: os
      sourcetype: iostat
      source: iostat
      host: $host$
      _raw: $device$	$rrps$	$wrps$	$rkbps$	$wkbps$	$avgwait$	$avgsvc$	$bwutil$
